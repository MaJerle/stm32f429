<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>TM STM32F4xx Libraries: TM_USB_MSC_HOST</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TM STM32F4xx Libraries
   &#160;<span id="projectnumber">v1.0.0</span>
   </div>
   <div id="projectbrief">Libraries for STM32F4xx devices from Tilen Majerle</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___t_m___u_s_b___m_s_c___h_o_s_t.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a>  </div>
  <div class="headertitle">
<div class="title">TM_USB_MSC_HOST<div class="ingroups"><a class="el" href="group___t_m___s_t_m32_f4xx___libraries.html">TM_STM32F4xx_Libraries</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>USB MSC HOST library for STM32F4xx devices - <a href="http://stm32f4-discovery.com/2014/07/library-21-read-sd-card-fatfs-stm32f4xx-devices/">http://stm32f4-discovery.com/2014/07/library-21-read-sd-card-fatfs-stm32f4xx-devices/</a> - <a href="http://stm32f4-discovery.com/2014/08/library-29-usb-msc-host-usb-flash-drive-stm32f4xx-devices">http://stm32f4-discovery.com/2014/08/library-29-usb-msc-host-usb-flash-drive-stm32f4xx-devices</a>.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group___t_m___u_s_b___m_s_c___h_o_s_t___typedefs"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___t_m___u_s_b___m_s_c___h_o_s_t___typedefs.html">TM_USB_MSC_HOST_Typedefs</a></td></tr>
<tr class="memdesc:group___t_m___u_s_b___m_s_c___h_o_s_t___typedefs"><td class="mdescLeft">&#160;</td><td class="mdescRight">Library Typedefs. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group___t_m___u_s_b___m_s_c___h_o_s_t___functions"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___t_m___u_s_b___m_s_c___h_o_s_t___functions.html">TM_USB_MSC_HOST_Functions</a></td></tr>
<tr class="memdesc:group___t_m___u_s_b___m_s_c___h_o_s_t___functions"><td class="mdescLeft">&#160;</td><td class="mdescRight">Library Functions. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>USB MSC HOST library for STM32F4xx devices - <a href="http://stm32f4-discovery.com/2014/07/library-21-read-sd-card-fatfs-stm32f4xx-devices/">http://stm32f4-discovery.com/2014/07/library-21-read-sd-card-fatfs-stm32f4xx-devices/</a> - <a href="http://stm32f4-discovery.com/2014/08/library-29-usb-msc-host-usb-flash-drive-stm32f4xx-devices">http://stm32f4-discovery.com/2014/08/library-29-usb-msc-host-usb-flash-drive-stm32f4xx-devices</a>. </p>
<p>This library allows you to read and write data to USB mass storage devices.</p>
<p>It works in USB FS or USB HS in FS mode.</p>
<p>By default, library works in USB FS mode (for STM32F4-Discovery board). If you want to use this on STM32F429-Discovery board, you have to activate USB HS in FS mode. Activate this with lines below in your defines.h file:</p>
<pre class="fragment">//Activate USB HS in FS mode
#define USE_USB_OTG_HS
</pre><dl class="section user"><dt>Pinout</dt><dd></dd></dl>
<pre class="fragment">USB         |STM32F4xx FS mode              |STM32F4xx HS in FS mode    |Notes
            |STM32F4-Discovery              |STM32F429-Discovery
                
Data +      PA12                            PB15                        Data+ for USB, standard and used pin
Data -      PA11                            PB14                        Data- for USB, standard and used pin
ID          PA10                            PB12                        ID pin, used on F4 and F429 discovery boards, not needed if you don't like it
VBUS        PA9                             PB13                        VBUS pin, used on F4 and F429 discovery board for activating USB chip.
                                                                        You have to use VBUS on discovery boards, but on nucleo, it's ok with only Data+ and Data- pins
</pre><p> Disable necessary pins</p>
<p>USB technically needs only Data+ and Data- pins. Also, ID pin can be used, but it is not needed.</p>
<dl class="section user"><dt>Disable ID PIN</dt><dd></dd></dl>
<p>If you need pin for something else, where ID is located, you can disable this pin for USB. Add lines below in your defines.h file:</p>
<pre class="fragment">//Disable ID pin
#define USB_MSC_HOST_DISABLE_ID
</pre><p>Disable VBUS PIN</p>
<p>VBUS pin is located on Discovery boards, to activate USB chip on board. If you are working with Discovery boards, then you need this pin, otherise USB will not work. But if you are working on other application (or Nucleo board), you only need Data+ and Data- pins. To disable VBUS pin, add lines below in your defines.h file:</p>
<pre class="fragment">//Disable VBUS pin
#define USB_MSC_HOST_DISABLE_VBUS
</pre> <hr/>
<p> Now, we have initialized USB, we have to enable it for FATFS too. Open your project defines.h file and add line below to activate FatFS for USB.</p>
<pre class="fragment">//Activate FatFS library for USB communication
#define FATFS_USE_USB       1
</pre><p>Too see, how to use FatFS with USB, open file <a class="el" href="tm__stm32f4__fatfs_8h_source.html">tm_stm32f4_fatfs.h</a> and check it's manual </p><hr/>
<dl class="section user"><dt>Changelog</dt><dd></dd></dl>
<pre class="fragment"> Version 1.0
  - First release
</pre><dl class="section user"><dt>Dependencies</dt><dd></dd></dl>
<pre class="fragment"> - STM32F4xx
 - defines.h
 - USB HOST stack
 - TM FATFS library
</pre> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Mar 25 2015 22:01:44 for TM STM32F4xx Libraries by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
