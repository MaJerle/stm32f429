<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>TM STM32F4xx Libraries: TM_SWO</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TM STM32F4xx Libraries
   &#160;<span id="projectnumber">v1.0.0</span>
   </div>
   <div id="projectbrief">Libraries for STM32F4xx devices from Tilen Majerle</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___t_m___s_w_o.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a>  </div>
  <div class="headertitle">
<div class="title">TM_SWO<div class="ingroups"><a class="el" href="group___t_m___s_t_m32_f4xx___libraries.html">TM_STM32F4xx_Libraries</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>SWO Debugging library for Cortex-M4/M3 processors including STM32F4xx - <a href="http://stm32f4-discovery.com/2014/12/library-46-debug-stm32f4-device-swo-feature/">http://stm32f4-discovery.com/2014/12/library-46-debug-stm32f4-device-swo-feature/</a>.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group___t_m___s_w_o___macros"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___t_m___s_w_o___macros.html">TM_SWO_Macros</a></td></tr>
<tr class="memdesc:group___t_m___s_w_o___macros"><td class="mdescLeft">&#160;</td><td class="mdescRight">Library defines. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group___t_m___s_w_o___functions"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___t_m___s_w_o___functions.html">TM_SWO_Functions</a></td></tr>
<tr class="memdesc:group___t_m___s_w_o___functions"><td class="mdescLeft">&#160;</td><td class="mdescRight">Library Functions. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>SWO Debugging library for Cortex-M4/M3 processors including STM32F4xx - <a href="http://stm32f4-discovery.com/2014/12/library-46-debug-stm32f4-device-swo-feature/">http://stm32f4-discovery.com/2014/12/library-46-debug-stm32f4-device-swo-feature/</a>. </p>
<p>Instead of using UART for debugging your program, you can use better solution for this.</p>
<p>STM32F4xx (all Cortex-M4 MCUs) have SWD programming/debugging mode.</p>
<p>It also contains SWO (Single Wire Output) for debugging purpose.</p>
<p>This output works only (!!) when you are in debug mode with your processor.</p>
<p>This library allows you to send data to PC using SWO peripheral.</p>
<p>Library is designed in a way that you can with simple define disable debug functionality, but you don't need to clear all your debug statements somewhere in your code.</p>
<p>By default, debug mode is active, but if you want to disable it, you can open defines.h file and add following define inside:</p>
<pre class="fragment">//Disable debug mode, disable all functions
#define SWO_DEBUG_ENABLED     0
</pre><p>Note, that if you don't disable SWO debugging in end application, it will work, but will take some processor cycles to try to output data. To prevent this checking, using define above, my functions becomes empty defines and compiler will throw them out from program.</p>
<p>Important notes:</p><ul>
<li>Your IDE must include debugging functionality,<ul>
<li>If it does not, you can download "STM32 ST-LINK Utility" from st.com and connect via ST-Link to your device,</li>
<li>In opened program click on "ST-LINK" -&gt; "Printf via SWO viewer",</li>
<li>Set CPU frequency and hit "Start"</li>
</ul>
</li>
<li>Keil uVIsion have debug option built-in,<ul>
<li>In "Options for target" go to "Debug" tab, select your debugger and hit "Settings" (ST-Link for most cases)</li>
<li>Under "Trace" tab set CPU frequency under "Core Clock" and click on "Enable Trace"</li>
<li>Under "ITM Stimulus Part" write "0x00000001" where you have "Enable" window,</li>
<li>You have 4 checkboxes for "Ports":<ul>
<li>Enable "Port 31..24"</li>
<li>Disable other 3</li>
</ul>
</li>
<li>Compile your application and click on "Start/Stop Debug Session"</li>
<li>On the left top, find button "Run" or press "F5" and if you don't have it, open Trace window under "View" tab</li>
</ul>
</li>
<li>In case you are using STM32F4xx boards, you might made some modifications to enable "Trace output":<ul>
<li>STM32F4-Discovery: Enabled by default</li>
<li>STM32F429-Discovery: You have to solder SB9 jumper to enable this feature</li>
<li>STM32-Nucleo: Enabled by default<ul>
<li>Nucleo boards have different ST-Link firmware and I've never got this working with my Nucleo F401 or F411, I always get error "Cannot read memory" in Keil uVision, also ST-Link Utility does not work.</li>
<li>With external debugger connected to SWD pins, works great. It must be problem with ST-Link on Nucleo boards.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Pin PB3 is output for SWO in STM32F4xx.</p>
<dl class="section user"><dt>Changelog</dt><dd></dd></dl>
<pre class="fragment"> Version 1.0
  - First release
</pre><dl class="section user"><dt>Dependencies</dt><dd></dd></dl>
<pre class="fragment"> - STM32F4xx
 - defines.h
 - TM STDIO
 - stdio.h
</pre> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sat Mar 28 2015 23:50:22 for TM STM32F4xx Libraries by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
