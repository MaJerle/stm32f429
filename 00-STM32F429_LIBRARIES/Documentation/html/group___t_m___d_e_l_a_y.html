<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>TM STM32F4xx Libraries: TM_DELAY</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TM STM32F4xx Libraries
   &#160;<span id="projectnumber">v1.0.0</span>
   </div>
   <div id="projectbrief">Libraries for STM32F4xx devices from Tilen Majerle</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___t_m___d_e_l_a_y.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a>  </div>
  <div class="headertitle">
<div class="title">TM_DELAY<div class="ingroups"><a class="el" href="group___t_m___s_t_m32_f4xx___libraries.html">TM_STM32F4xx_Libraries</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Pretty accurate delay functions with SysTick or any other timer - <a href="http://stm32f4-discovery.com/2014/04/library-03-stm32f429-discovery-system-clock-and-pretty-precise-delay-library/">http://stm32f4-discovery.com/2014/04/library-03-stm32f429-discovery-system-clock-and-pretty-precise-delay-library/</a>.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group___t_m___d_e_l_a_y___variables"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___t_m___d_e_l_a_y___variables.html">TM_DELAY_Variables</a></td></tr>
<tr class="memdesc:group___t_m___d_e_l_a_y___variables"><td class="mdescLeft">&#160;</td><td class="mdescRight">Library Variables. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group___t_m___d_e_l_a_y___functions"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___t_m___d_e_l_a_y___functions.html">TM_DELAY_Functions</a></td></tr>
<tr class="memdesc:group___t_m___d_e_l_a_y___functions"><td class="mdescLeft">&#160;</td><td class="mdescRight">Library Functions. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Pretty accurate delay functions with SysTick or any other timer - <a href="http://stm32f4-discovery.com/2014/04/library-03-stm32f429-discovery-system-clock-and-pretty-precise-delay-library/">http://stm32f4-discovery.com/2014/04/library-03-stm32f429-discovery-system-clock-and-pretty-precise-delay-library/</a>. </p>
<pre class="fragment">------!!!!!!!!!!!------
If you are using GCC (sucks) compiler, then your delay is probably totally inaccurate.
USE TIMER FOR DELAY, otherwise your delay will not be accurate

Or use ARM compiler!
------!!!!!!!!!!!------
</pre><p>As of version 2.0 you have now to possible ways to make a delay. The first (and default) is Systick timer. It makes interrupts every 1ms. If you want delay in "us" accuracy, there is simple pooling (variable) mode.</p>
<p>The second (better) options is to use one of timers on F4xx MCU. Timer also makes an interrupts every 1ms (for count time) instead of 1us as it was before. For "us" delay, timer's counter is used to count ticks. It makes a new tick each "us". Not all MCUs have all possible timers, so this lib has been designed that you select your own.</p>
<dl class="section user"><dt>Select custom TIM for delay functions</dt><dd></dd></dl>
<p>By default, Systick timer is used for delay. If you want your custom timer, open defines.h file, add lines below and edit for your needs:</p>
<pre class="fragment">//Select custom timer for delay, here is TIM2 selected.
//If you want custom TIMx, just replace number "2" for your TIM's number.
#define TM_DELAY_TIM                TIM2
#define TM_DELAY_TIM_IRQ            TIM2_IRQn
#define TM_DELAY_TIM_IRQ_HANDLER    TIM2_IRQHandler
</pre><p>With this setting (using custom timer) you have better accuracy in "us" delay. Also, you have to know, that if you want to use timer for delay, you have to include additional files:</p>
<ul>
<li>CMSIS:<ul>
<li>STM32F4xx TIM</li>
<li>MISC</li>
</ul>
</li>
<li>TM: TM TIMER PROPERTIES</li>
</ul>
<p>Delay functions (Delay, Delayms) are now Inline functions. This allows faster execution and more accurate delay.</p>
<p>If you are working with Keil uVision and you are using Systick for delay, then set KEIL_IDE define in options for project:</p><ul>
<li>Open "Options for target"</li>
<li>Tab "C/C++"</li>
<li>Under "Define" add "KEIL_IDE", without quotes</li>
</ul>
<dl class="section user"><dt>Changelog</dt><dd></dd></dl>
<pre class="fragment"> Version 2.2
  - January 12, 2015
  - Added support for custom function call each time 1ms interrupt happen
  - Function is called TM_DELAY_1msHandler(void), with __weak parameter
  - attributes.h file needed
  
 Version 2.1
  - GCC compiler fixes
  - Still prefer that you use TIM for delay if you are working with ARM-GCC compiler

 Version 2.0
  - November 28, 2014
  - Delay library has been totally rewritten. Because Systick is designed to be used
       in RTOS, it is not compatible to use it at the 2 places at the same time.
       For that purpose, library has been rewritten.
  - Read full documentation below

 Version 1.0
  - First release
</pre><dl class="section user"><dt>Dependencies</dt><dd></dd></dl>
<pre class="fragment"> - STM32F4xx
 - STM32F4xx RCC:       Only if you want to use TIMx for delay instead of Systick
 - STM32F4xx TIM:       Only if you want to use TIMx for delay instead of Systick
 - MISC
 - defines.h
 - TM TIMER PROPERTIES: Only if you want to use TIMx for delay instead of Systick
 - attribute.h
</pre> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sun Mar 22 2015 10:43:55 for TM STM32F4xx Libraries by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
